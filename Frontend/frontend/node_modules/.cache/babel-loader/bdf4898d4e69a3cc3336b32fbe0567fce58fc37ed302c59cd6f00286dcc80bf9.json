{"ast":null,"code":"var _jsxFileName = \"D:\\\\Diplomarbeit\\\\Project\\\\Frontend\\\\frontend\\\\src\\\\components\\\\MessageGroupList.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\nimport MessageGroup from './MessageGroup';\nimport DateSeparator from './DateSeparator';\nimport { formatDateForSeparator, isNewDay } from '../utils/dateUtils';\nimport styles from '../styles/MessageGroupList.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MessageGroupList({\n  messages,\n  currentUserId\n}) {\n  _s();\n  const renderedItems = useMemo(() => {\n    const result = [];\n    let group = [];\n    let lastUser = null;\n    let lastDate = null;\n    messages.forEach((msg, index) => {\n      const isNewUser = msg.user.id !== lastUser;\n      const isNewDay = !lastDate || isNewDay(lastDate, msg.sentAt);\n      if (group.length && (isNewUser || isNewDay)) {\n        result.push({\n          type: 'group',\n          messages: group,\n          isLeft: group[0].user.id !== currentUserId\n        });\n        group = [];\n      }\n      if (isNewDay) {\n        result.push({\n          type: 'date',\n          date: msg.sentAt\n        });\n      }\n      group.push(msg);\n      lastUser = msg.user.id;\n      lastDate = msg.sentAt;\n    });\n    if (group.length) {\n      result.push({\n        type: 'group',\n        messages: group,\n        isLeft: group[0].user.id !== currentUserId\n      });\n    }\n    return result;\n  }, [messages, currentUserId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: /*#__PURE__*/_jsxDEV(Virtuoso, {\n      data: renderedItems,\n      itemContent: (index, item) => {\n        if (item.type === 'group') {\n          return /*#__PURE__*/_jsxDEV(MessageGroup, {\n            messages: item.messages,\n            isLeft: item.isLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 29\n          }, this);\n        }\n        if (item.type === 'date') {\n          return /*#__PURE__*/_jsxDEV(DateSeparator, {\n            date: item.date instanceof Date ? formatDateForSeparator(item.date) : 'Невідомо'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 29\n          }, this);\n        }\n        return null;\n      },\n      followOutput: \"auto\",\n      initialTopMostItemIndex: renderedItems.length - 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}\n_s(MessageGroupList, \"6yjJXpdUabcgWpTRKM3yzFw9kqY=\");\n_c = MessageGroupList;\nexport default _c2 = /*#__PURE__*/React.memo(MessageGroupList);\nvar _c, _c2;\n$RefreshReg$(_c, \"MessageGroupList\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useMemo","Virtuoso","MessageGroup","DateSeparator","formatDateForSeparator","isNewDay","styles","jsxDEV","_jsxDEV","MessageGroupList","messages","currentUserId","_s","renderedItems","result","group","lastUser","lastDate","forEach","msg","index","isNewUser","user","id","sentAt","length","push","type","isLeft","date","className","container","children","data","itemContent","item","fileName","_jsxFileName","lineNumber","columnNumber","Date","followOutput","initialTopMostItemIndex","_c","_c2","memo","$RefreshReg$"],"sources":["D:/Diplomarbeit/Project/Frontend/frontend/src/components/MessageGroupList.js"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { Virtuoso } from 'react-virtuoso';\r\nimport MessageGroup from './MessageGroup';\r\nimport DateSeparator from './DateSeparator';\r\nimport { formatDateForSeparator, isNewDay } from '../utils/dateUtils';\r\nimport styles from '../styles/MessageGroupList.module.css';\r\n\r\nfunction MessageGroupList({ messages, currentUserId }) {\r\n    const renderedItems = useMemo(() => {\r\n        const result = [];\r\n        let group = [];\r\n        let lastUser = null;\r\n        let lastDate = null;\r\n\r\n        messages.forEach((msg, index) => {\r\n            const isNewUser = msg.user.id !== lastUser;\r\n            const isNewDay = !lastDate || isNewDay(lastDate, msg.sentAt);\r\n\r\n            if (group.length && (isNewUser || isNewDay)) {\r\n                result.push({ type: 'group', messages: group, isLeft: group[0].user.id !== currentUserId });\r\n                group = [];\r\n            }\r\n\r\n            if (isNewDay) {\r\n                result.push({ type: 'date', date: msg.sentAt });\r\n            }\r\n\r\n            group.push(msg);\r\n            lastUser = msg.user.id;\r\n            lastDate = msg.sentAt;\r\n        });\r\n\r\n        if (group.length) {\r\n            result.push({ type: 'group', messages: group, isLeft: group[0].user.id !== currentUserId });\r\n        }\r\n\r\n        return result;\r\n    }, [messages, currentUserId]);\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <Virtuoso\r\n                data={renderedItems}\r\n                itemContent={(index, item) => {\r\n                    if (item.type === 'group') {\r\n                        return (\r\n                            <MessageGroup\r\n                                messages={item.messages}\r\n                                isLeft={item.isLeft}\r\n                            />\r\n                        );\r\n                    }\r\n\r\n                    if (item.type === 'date') {\r\n                        return (\r\n                            <DateSeparator\r\n                                date={\r\n                                    item.date instanceof Date\r\n                                        ? formatDateForSeparator(item.date)\r\n                                        : 'Невідомо'\r\n                                }\r\n                            />\r\n                        );\r\n                    }\r\n\r\n                    return null;\r\n                }}\r\n\r\n                followOutput=\"auto\"\r\n                initialTopMostItemIndex={renderedItems.length - 1}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default React.memo(MessageGroupList);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}